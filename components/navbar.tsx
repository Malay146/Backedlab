"use client";

import React, { useState } from "react";
import Link from "next/link";
import TextAnimation from "./landing/text-animation";
import { cn } from "@/utils/cn";
import { motion, AnimatePresence } from "motion/react";
import { Menu, X } from "lucide-react";

const Navbar = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const links = [
    { name: "Home", href: "#hero" },
    { name: "Features", href: "#features" },
    { name: "Services", href: "#services" },
    { name: "FAQ", href: "#faq" },
  ];

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);

  return (
    <>
      {/* Desktop & Mobile Navbar */}
      <div className="w-full flex items-center justify-center fixed top-4 md:top-8 z-50 px-4">
        <motion.div
          initial={{ y: -100, opacity: 0 }}
          animate={{ y: 0, opacity: 1 }}
          transition={{ duration: 0.5 }}
          className="w-full max-w-6xl pl-4 pr-3 py-2 bg-white/30 border border-[#E5E5E5] rounded-lg flex items-center justify-between backdrop-blur-sm"
        >
          <Link href="/" className="cursor-pointer">
            <MainLogo className="w-24 md:w-auto" />
          </Link>

          {/* Desktop Navigation */}
          <div className="hidden lg:flex items-center gap-4">
            {links.map((link) => (
              <a
                key={link.name}
                href={link.href}
                className="font-inter text-black leading-none px-2 py-1 transition-colors"
              >
                {link.name}
              </a>
            ))}
            <button className="group font-inter font-medium px-4 py-2 bg-blue-600 rounded-md transition cursor-pointer">
              <span className="chroma-text-out chroma-text-out-animate text-white">
                Book a Call
              </span>
            </button>
          </div>

          {/* Mobile Menu Button */}
          <motion.button
            whileTap={{ scale: 0.9 }}
            onClick={toggleMenu}
            className="lg:hidden p-2 hover:bg-white/20 rounded-md transition"
            aria-label="Toggle menu"
          >
            {isMenuOpen ? (
              <X className="w-6 h-6 text-black" />
            ) : (
              <Menu className="w-6 h-6 text-black" />
            )}
          </motion.button>
        </motion.div>
      </div>

      {/* Mobile Menu */}
      <AnimatePresence>
        {isMenuOpen && (
          <motion.div
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -20 }}
            transition={{ duration: 0.3 }}
            className="fixed top-25 md:top-30 left-4 right-4 z-40 lg:hidden"
          >
            <div className="bg-white/95 backdrop-blur-md border border-[#E5E5E5] rounded-3xl shadow-xl overflow-hidden">
              <nav className="flex flex-col p-6">
                {links.map((link, index) => (
                  <motion.div
                    key={link.name}
                    initial={{ opacity: 0, x: -20 }}
                    animate={{ opacity: 1, x: 0 }}
                    transition={{ duration: 0.3, delay: index * 0.1 }}
                  >
                    <Link
                      href={link.href}
                      onClick={toggleMenu}
                      className="font-sans text-black font-medium text-lg py-3 px-4 rounded-lg transition block"
                    >
                      {link.name}
                    </Link>
                  </motion.div>
                ))}
                <motion.button
                  initial={{ opacity: 0, x: -20 }}
                  animate={{ opacity: 1, x: 0 }}
                  transition={{ duration: 0.3, delay: links.length * 0.1 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={toggleMenu}
                  className="font-sans mt-4 px-6 py-3 bg-blue-600 text-white rounded-md transition font-medium"
                >
                  Book a Call
                </motion.button>
              </nav>
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </>
  );
};

export default Navbar;

const MainLogo = ({ className }: { className?: string }) => (
  <svg
    width="158"
    height="29"
    viewBox="0 0 158 29"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    className={cn("inline-block", className)}
  >
    <path
      d="M5.05862 5.63514C5.79385 4.05844 7.66856 3.3761 9.24526 4.11133C10.8217 4.84667 11.5034 6.72097 10.7682 8.29756C10.3566 9.18001 9.58832 9.78197 8.7151 10.0121C7.93653 10.2172 7.12423 10.5755 6.78396 11.3052C6.44369 12.0349 6.69138 12.8875 7.03466 13.6158C7.41967 14.4326 7.45237 15.4081 7.04097 16.2906C6.3058 17.8672 4.43185 18.5498 2.85522 17.8148C1.27852 17.0796 0.596185 15.2049 1.33141 13.6282C1.77758 12.6717 2.64299 12.0443 3.60679 11.863C4.36319 11.7207 5.15322 11.394 5.47849 10.6965C5.80376 9.99891 5.54621 9.18373 5.16898 8.51285C4.68831 7.658 4.61265 6.59178 5.05862 5.63514Z"
      fill="black"
    />
    <path
      d="M19.8211 5.63514C19.0859 4.05844 17.2112 3.3761 15.6345 4.11133C14.058 4.84667 13.3764 6.72097 14.1116 8.29756C14.5232 9.18001 15.2914 9.78197 16.1647 10.0121C16.9432 10.2172 17.7555 10.5755 18.0958 11.3052C18.4361 12.0349 18.1884 12.8875 17.8451 13.6158C17.4601 14.4326 17.4274 15.4081 17.8388 16.2906C18.574 17.8672 20.4479 18.5498 22.0245 17.8148C23.6012 17.0796 24.2836 15.2049 23.5483 13.6282C23.1022 12.6717 22.2368 12.0443 21.273 11.863C20.5166 11.7207 19.7265 11.394 19.4013 10.6965C19.076 9.99891 19.3336 9.18373 19.7108 8.51285C20.1914 7.658 20.2671 6.59177 19.8211 5.63514Z"
      fill="black"
    />
    <path
      d="M16.8297 19.52C18.5694 19.52 19.9801 20.9307 19.9801 22.6704C19.9799 24.4099 18.5693 25.8198 16.8297 25.8198C15.856 25.8198 14.9857 25.3779 14.4082 24.6837C13.8932 24.0648 13.2252 23.48 12.4201 23.48C11.6149 23.48 10.9469 24.0648 10.4319 24.6837C9.85432 25.3778 8.98407 25.8197 8.01038 25.8198C6.27081 25.8198 4.8602 24.4099 4.85999 22.6704C4.85999 20.9307 6.27068 19.52 8.01038 19.52C9.06582 19.5201 10.0002 20.0393 10.5718 20.8362C11.0204 21.4616 11.6504 22.0396 12.4201 22.0396C13.1897 22.0396 13.8197 21.4616 14.2683 20.8362C14.8399 20.0393 15.7742 19.5201 16.8297 19.52Z"
      fill="black"
    />
    <path
      d="M30.9898 22V6.16H37.3018C38.2458 6.16 39.0938 6.24 39.8458 6.4C40.5978 6.56 41.2378 6.816 41.7658 7.168C42.3098 7.504 42.7258 7.936 43.0138 8.464C43.3018 8.992 43.4458 9.624 43.4458 10.36C43.4458 10.984 43.3178 11.528 43.0618 11.992C42.8218 12.44 42.4298 12.816 41.8858 13.12C41.3418 13.408 40.6298 13.608 39.7498 13.72V14.08C41.2538 14.192 42.3498 14.576 43.0378 15.232C43.7418 15.872 44.0938 16.736 44.0938 17.824C44.0938 18.736 43.8618 19.504 43.3978 20.128C42.9498 20.736 42.2618 21.2 41.3338 21.52C40.4218 21.84 39.2698 22 37.8778 22H30.9898ZM33.8698 19.528H37.9258C39.0138 19.528 39.8138 19.36 40.3258 19.024C40.8538 18.672 41.1178 18.136 41.1178 17.416C41.1178 16.584 40.7738 15.96 40.0858 15.544C39.4138 15.128 38.3818 14.92 36.9898 14.92H33.8698V19.528ZM33.8698 12.952H36.5098C37.8538 12.952 38.8458 12.768 39.4858 12.4C40.1418 12.032 40.4698 11.472 40.4698 10.72C40.4698 10 40.1818 9.472 39.6058 9.136C39.0458 8.784 38.1818 8.608 37.0138 8.608H33.8698V12.952ZM49.9445 22.312C49.2565 22.312 48.6405 22.184 48.0965 21.928C47.5525 21.656 47.1205 21.256 46.8005 20.728C46.4965 20.2 46.3445 19.544 46.3445 18.76C46.3445 18.104 46.4645 17.544 46.7045 17.08C46.9605 16.616 47.3365 16.24 47.8325 15.952C48.3285 15.648 48.9445 15.4 49.6805 15.208C50.4165 15 51.2805 14.824 52.2725 14.68C52.8165 14.6 53.2565 14.52 53.5925 14.44C53.9445 14.36 54.2005 14.24 54.3605 14.08C54.5205 13.904 54.6005 13.648 54.6005 13.312C54.6005 12.816 54.4245 12.392 54.0725 12.04C53.7365 11.672 53.1845 11.488 52.4165 11.488C51.9525 11.488 51.5045 11.568 51.0725 11.728C50.6565 11.888 50.2965 12.144 49.9925 12.496C49.6885 12.832 49.4805 13.28 49.3685 13.84L46.6565 13C46.8325 12.36 47.0885 11.808 47.4245 11.344C47.7605 10.864 48.1765 10.456 48.6725 10.12C49.1685 9.784 49.7365 9.536 50.3765 9.376C51.0165 9.216 51.7205 9.136 52.4885 9.136C53.6565 9.136 54.6165 9.328 55.3685 9.712C56.1205 10.08 56.6805 10.664 57.0485 11.464C57.4165 12.248 57.6005 13.264 57.6005 14.512V16.864C57.6005 17.408 57.6085 17.976 57.6245 18.568C57.6565 19.144 57.6885 19.728 57.7205 20.32C57.7685 20.896 57.8245 21.456 57.8885 22H55.1765C55.1125 21.552 55.0565 21.072 55.0085 20.56C54.9605 20.048 54.9205 19.528 54.8885 19H54.5045C54.2805 19.608 53.9605 20.168 53.5445 20.68C53.1285 21.176 52.6165 21.576 52.0085 21.88C51.4165 22.168 50.7285 22.312 49.9445 22.312ZM51.1445 20.08C51.4645 20.08 51.7845 20.024 52.1045 19.912C52.4405 19.8 52.7685 19.632 53.0885 19.408C53.4085 19.184 53.7045 18.912 53.9765 18.592C54.2485 18.256 54.4805 17.864 54.6725 17.416L54.6245 15.28L55.2005 15.376C54.9285 15.6 54.5925 15.776 54.1925 15.904C53.7925 16.032 53.3685 16.128 52.9205 16.192C52.4885 16.256 52.0485 16.336 51.6005 16.432C51.1685 16.512 50.7765 16.624 50.4245 16.768C50.0725 16.896 49.7925 17.088 49.5845 17.344C49.3765 17.584 49.2725 17.92 49.2725 18.352C49.2725 18.896 49.4485 19.32 49.8005 19.624C50.1525 19.928 50.6005 20.08 51.1445 20.08ZM66.5087 22.312C65.4207 22.312 64.4767 22.152 63.6767 21.832C62.8927 21.512 62.2367 21.064 61.7087 20.488C61.1967 19.896 60.8127 19.208 60.5567 18.424C60.3007 17.64 60.1727 16.792 60.1727 15.88C60.1727 14.904 60.3007 14.008 60.5567 13.192C60.8287 12.376 61.2287 11.664 61.7567 11.056C62.2847 10.448 62.9327 9.976 63.7007 9.64C64.4847 9.304 65.3807 9.136 66.3887 9.136C67.3967 9.136 68.2687 9.304 69.0047 9.64C69.7567 9.976 70.3647 10.448 70.8287 11.056C71.2927 11.648 71.6047 12.344 71.7647 13.144L68.9327 14.032C68.9007 13.552 68.7727 13.128 68.5487 12.76C68.3247 12.376 68.0207 12.08 67.6367 11.872C67.2527 11.664 66.7967 11.56 66.2687 11.56C65.7567 11.56 65.3087 11.664 64.9247 11.872C64.5567 12.064 64.2447 12.344 63.9887 12.712C63.7487 13.08 63.5567 13.528 63.4127 14.056C63.2847 14.568 63.2207 15.144 63.2207 15.784C63.2207 16.664 63.3407 17.416 63.5807 18.04C63.8207 18.664 64.1887 19.152 64.6847 19.504C65.1807 19.84 65.7967 20.008 66.5327 20.008C67.1887 20.008 67.7167 19.888 68.1167 19.648C68.5327 19.392 68.8447 19.064 69.0527 18.664C69.2767 18.264 69.4127 17.824 69.4607 17.344L72.1487 17.944C72.0527 18.6 71.8687 19.192 71.5967 19.72C71.3247 20.248 70.9487 20.712 70.4687 21.112C70.0047 21.496 69.4447 21.792 68.7887 22C68.1327 22.208 67.3727 22.312 66.5087 22.312ZM74.2984 22V4.936H77.2744V14.512C77.8184 14.176 78.3384 13.808 78.8344 13.408C79.3304 12.992 79.7864 12.56 80.2024 12.112C80.6184 11.664 80.9864 11.216 81.3064 10.768C81.6264 10.304 81.8904 9.864 82.0984 9.448H85.5784C85.3224 10.072 84.9864 10.688 84.5704 11.296C84.1544 11.904 83.6664 12.464 83.1064 12.976C82.5624 13.488 81.9464 13.936 81.2584 14.32C80.5704 14.688 79.8344 14.944 79.0504 15.088V15.424C80.0424 15.28 80.8744 15.328 81.5464 15.568C82.2184 15.808 82.7864 16.168 83.2504 16.648C83.7144 17.128 84.0984 17.688 84.4024 18.328C84.7224 18.952 85.0184 19.592 85.2904 20.248L85.9144 22H82.5784L82.1944 20.848C81.8904 20.048 81.5704 19.344 81.2344 18.736C80.9144 18.112 80.5064 17.632 80.0104 17.296C79.5304 16.944 78.9064 16.768 78.1384 16.768H77.2744V22H74.2984ZM93.4858 22.312C92.4778 22.312 91.5738 22.168 90.7738 21.88C89.9898 21.592 89.3258 21.176 88.7818 20.632C88.2378 20.072 87.8218 19.4 87.5338 18.616C87.2458 17.832 87.1018 16.944 87.1018 15.952C87.1018 14.96 87.2378 14.048 87.5098 13.216C87.7978 12.384 88.2058 11.664 88.7338 11.056C89.2618 10.448 89.9018 9.976 90.6538 9.64C91.4218 9.304 92.2938 9.136 93.2698 9.136C94.1818 9.136 94.9978 9.288 95.7178 9.592C96.4378 9.896 97.0458 10.352 97.5418 10.96C98.0378 11.552 98.4058 12.296 98.6458 13.192C98.8858 14.072 98.9658 15.096 98.8858 16.264L89.0698 16.336V14.584L97.1338 14.512L96.0778 15.496C96.1738 14.584 96.1018 13.84 95.8618 13.264C95.6218 12.672 95.2778 12.24 94.8298 11.968C94.3818 11.68 93.8698 11.536 93.2938 11.536C92.6378 11.536 92.0618 11.712 91.5658 12.064C91.0698 12.4 90.6858 12.896 90.4138 13.552C90.1578 14.192 90.0298 14.976 90.0298 15.904C90.0298 17.296 90.3338 18.336 90.9418 19.024C91.5658 19.712 92.4138 20.056 93.4858 20.056C93.9658 20.056 94.3658 20 94.6858 19.888C95.0218 19.76 95.3018 19.6 95.5258 19.408C95.7498 19.2 95.9258 18.968 96.0538 18.712C96.1978 18.456 96.3098 18.184 96.3898 17.896L99.0298 18.496C98.9018 19.088 98.6938 19.616 98.4058 20.08C98.1178 20.544 97.7418 20.944 97.2778 21.28C96.8298 21.616 96.2938 21.872 95.6698 22.048C95.0458 22.224 94.3178 22.312 93.4858 22.312ZM106.279 22.312C105.223 22.312 104.303 22.04 103.519 21.496C102.751 20.952 102.159 20.192 101.743 19.216C101.327 18.224 101.119 17.056 101.119 15.712C101.119 14.448 101.311 13.328 101.695 12.352C102.079 11.36 102.639 10.584 103.375 10.024C104.127 9.448 105.055 9.16 106.159 9.16C107.007 9.16 107.703 9.328 108.247 9.664C108.807 9.984 109.263 10.44 109.615 11.032C109.967 11.608 110.247 12.288 110.455 13.072H110.959C110.863 12.576 110.775 12.08 110.695 11.584C110.615 11.088 110.543 10.616 110.479 10.168C110.431 9.704 110.407 9.288 110.407 8.92V4.96H113.455V15.832V22H110.887L110.935 18.448H110.479C110.303 19.28 110.031 19.984 109.663 20.56C109.295 21.136 108.831 21.576 108.271 21.88C107.727 22.168 107.063 22.312 106.279 22.312ZM107.239 19.816C107.767 19.816 108.231 19.696 108.631 19.456C109.031 19.2 109.359 18.88 109.615 18.496C109.887 18.112 110.087 17.696 110.215 17.248C110.359 16.784 110.431 16.352 110.431 15.952V15.544C110.431 15.24 110.383 14.912 110.287 14.56C110.207 14.208 110.079 13.864 109.903 13.528C109.743 13.176 109.527 12.864 109.255 12.592C108.999 12.304 108.695 12.08 108.343 11.92C108.007 11.744 107.631 11.656 107.215 11.656C106.591 11.656 106.063 11.832 105.631 12.184C105.199 12.536 104.863 13.016 104.623 13.624C104.399 14.232 104.287 14.944 104.287 15.76C104.287 16.576 104.407 17.288 104.647 17.896C104.887 18.504 105.223 18.976 105.655 19.312C106.103 19.648 106.631 19.816 107.239 19.816ZM117.029 22V6.16H120.053V22H117.029ZM117.725 22V19.408H126.989V22H117.725ZM132.046 22.312C131.358 22.312 130.742 22.184 130.198 21.928C129.654 21.656 129.222 21.256 128.902 20.728C128.598 20.2 128.446 19.544 128.446 18.76C128.446 18.104 128.566 17.544 128.806 17.08C129.062 16.616 129.438 16.24 129.934 15.952C130.43 15.648 131.046 15.4 131.782 15.208C132.518 15 133.382 14.824 134.374 14.68C134.918 14.6 135.358 14.52 135.694 14.44C136.046 14.36 136.302 14.24 136.462 14.08C136.622 13.904 136.702 13.648 136.702 13.312C136.702 12.816 136.526 12.392 136.174 12.04C135.838 11.672 135.286 11.488 134.518 11.488C134.054 11.488 133.606 11.568 133.174 11.728C132.758 11.888 132.398 12.144 132.094 12.496C131.79 12.832 131.582 13.28 131.47 13.84L128.758 13C128.934 12.36 129.19 11.808 129.526 11.344C129.862 10.864 130.278 10.456 130.774 10.12C131.27 9.784 131.838 9.536 132.478 9.376C133.118 9.216 133.822 9.136 134.59 9.136C135.758 9.136 136.718 9.328 137.47 9.712C138.222 10.08 138.782 10.664 139.15 11.464C139.518 12.248 139.702 13.264 139.702 14.512V16.864C139.702 17.408 139.71 17.976 139.726 18.568C139.758 19.144 139.79 19.728 139.822 20.32C139.87 20.896 139.926 21.456 139.99 22H137.278C137.214 21.552 137.158 21.072 137.11 20.56C137.062 20.048 137.022 19.528 136.99 19H136.606C136.382 19.608 136.062 20.168 135.646 20.68C135.23 21.176 134.718 21.576 134.11 21.88C133.518 22.168 132.83 22.312 132.046 22.312ZM133.246 20.08C133.566 20.08 133.886 20.024 134.206 19.912C134.542 19.8 134.87 19.632 135.19 19.408C135.51 19.184 135.806 18.912 136.078 18.592C136.35 18.256 136.582 17.864 136.774 17.416L136.726 15.28L137.302 15.376C137.03 15.6 136.694 15.776 136.294 15.904C135.894 16.032 135.47 16.128 135.022 16.192C134.59 16.256 134.15 16.336 133.702 16.432C133.27 16.512 132.878 16.624 132.526 16.768C132.174 16.896 131.894 17.088 131.686 17.344C131.478 17.584 131.374 17.92 131.374 18.352C131.374 18.896 131.55 19.32 131.902 19.624C132.254 19.928 132.702 20.08 133.246 20.08ZM150.17 22.312C149.37 22.312 148.682 22.16 148.106 21.856C147.53 21.536 147.058 21.088 146.69 20.512C146.338 19.936 146.082 19.248 145.922 18.448H145.49L145.514 22H142.97V15.832V4.96H145.994V9.016C145.994 9.4 145.97 9.816 145.922 10.264C145.874 10.712 145.81 11.176 145.73 11.656C145.65 12.12 145.562 12.592 145.466 13.072H145.97C146.178 12.304 146.45 11.632 146.786 11.056C147.138 10.464 147.594 10 148.154 9.664C148.714 9.328 149.402 9.16 150.218 9.16C151.258 9.16 152.154 9.44 152.906 10C153.674 10.544 154.266 11.312 154.682 12.304C155.098 13.28 155.306 14.44 155.306 15.784C155.306 17.096 155.098 18.24 154.682 19.216C154.282 20.192 153.698 20.952 152.93 21.496C152.178 22.04 151.258 22.312 150.17 22.312ZM149.21 19.816C149.802 19.816 150.322 19.648 150.77 19.312C151.218 18.976 151.554 18.504 151.778 17.896C152.018 17.288 152.138 16.568 152.138 15.736C152.138 14.936 152.026 14.232 151.802 13.624C151.578 13.016 151.25 12.536 150.818 12.184C150.386 11.832 149.858 11.656 149.234 11.656C148.818 11.656 148.434 11.744 148.082 11.92C147.73 12.08 147.426 12.304 147.17 12.592C146.914 12.864 146.698 13.168 146.522 13.504C146.346 13.84 146.21 14.192 146.114 14.56C146.034 14.912 145.994 15.24 145.994 15.544V15.952C145.994 16.352 146.058 16.784 146.186 17.248C146.314 17.696 146.514 18.112 146.786 18.496C147.058 18.88 147.394 19.2 147.794 19.456C148.194 19.696 148.666 19.816 149.21 19.816Z"
      fill="black"
    />
  </svg>
);
